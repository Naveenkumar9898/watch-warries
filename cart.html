<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="script.js" />
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
</head>
<body>
     <header>
      <nav class="navbar navbar-light bg-light">
        <div class="container-fluid header">
          <a class="navbar-brand" href="#" style="color: silver">
            <img
              src="images/logologo.jpg"
              alt=""
              width="40"
              height="24"
              class="d-inline-block align-text-top"
            />Warrior watch
          </a>

          <ul class="nav nav-pills">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="index.html">Home</a>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                data-bs-toggle="dropdown"
                href="#"
                role="button"
                aria-expanded="false"
                >Collections</a
              >
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="#">Separated link</a></li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Locations</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" tabindex="-1" aria-disabled="true"
                >About</a
              >
            </li>
          </ul>
          <div class="shopping">
            <button
              type="button"
              class="btn position-relative"
              style="background-color: silver; color: white"
            >
              Cart
              <span
                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                id="cart"
              >
                0
                <span class="visually-hidden">unread messages</span>
              </span>
            </button>
          </div>
        </div>
      </nav>
    </header>
    <!-- end header -->

   
      <!-- <div style="display: flex;">
      <div class="card mb-3" style="width: 70%;">
  <div class="row g-0">
    <div class="col-md-4">
     <img src="images/w1-removebg-preview.png" class="img-fluid rounded-start" alt="...">
    </div>
    <div class="col-md-8">
      <div class="card-body">
       <h5 class="card-title">High-Performance Watch
BODERRY</h5>
         <p class="card-text">Titan Metal Mechanicals Blue Dial Stainless Steel Strap Analog Watch

.</p>
        <p class="card-text"><small class="text-muted"><div class="price">
              <span class="old">$2,499</span>
              <span class="new">$1,800</span>
            </div></small></p>
      </div>
    </div>
  </div>
   <div class="add">
   <button style="margin-left: 100px;"> <div class="dec">-</div></button>
    <div class="counting">0</div>
   <button> <div class="inc">+</div></button>
   
    
 </div>
 <div class="trashs " style=" display: flex; justify-content: end ;margin: 20px;">
   <button style="border: none;"><i class="fa fa-trash" aria-hidden="true" style="color: red;"></i></button> 
   </div>
</div> -->
<div class="part" style="display: flex;">
  <div id="totalsec" style="width: 80%;">
  
</div>
<div class=" me-auto  w-25" style="position: fixed;
    right: 22px;
    margin-top: 174px;" >
        <span style="color: white;font-size: 25px;">Total Amount: $</span><span id="totalamount" style="color: white;font-size: 25px;">00</span> <br>
        <button class="rounded border none mt-3" id="buybtn">BUY NOW</button>
      </div>
</div>




     <style>
      body{
        background-color: rgba(0, 0, 0, 0.856);
      }
      header{
        margin-top: 5%;
      }
        .add{
            display: flex;
            margin: 5px;
        }
        button{
            border-radius: 20px;
        }
        .dec{
            /* border: 2px solid black; */
            border-radius: 100px;
            padding: 10px;

        }
        .counting{
            padding: 10px;
            font-size: x-large;
        }
        .inc{
             /* border: 2px solid black */

            border-radius: 10px;
            padding: 10px;

        }

    </style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   <script>
  let product = JSON.parse(localStorage.getItem("product")) || [];
  $("#cart").text(product.length);

  let row = '';
  if(product.length>0){
  product.forEach((item, index) => {
    row += `
      <div class="card mb-3" style="width: 70%;">
        <div class="row g-0">
          <div class="col-md-4">
            <img src="${item.proimg}" class="img-fluid rounded-start" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">High-Performance Watch BODERRY</h5>
              <p class="card-text">${item.proname}</p>
              <p class="card-text">
                <small class="text-muted">
                  <div class="price">
                    <span class="old">$2,499</span>
                    <span class="new">${item.proprice}</span>
                  </div>
                </small>
              </p>
            </div>
          </div>
        </div>
        <div class="add" style="margin-left: 3%;">
         
          <div class="counting" "> <span style="color:green">20% offers!</span> available</div> 
 
        </div>
        <div class="trashs" style="display: flex; justify-content: end; margin: 20px;">
          <button style="border: none;" class="re-btn"><i class="fa fa-trash" aria-hidden="true" style="color: red;"></i></button> 
        </div>
      </div>
    `;
  });

  }

  $("#totalsec").append(row);

  function updateGrandTotal() {
    // debugger
    let total = 0;
    $(".card").each(function () {
      debugger;
      let pricetext = $(this).find(".new").text();
      let price = parseFloat(pricetext.replace(/[^\d.]/g, ""));
      let qty = parseInt($(".counting").text());
      total += isNaN(price) ? 0 : price;
    });
    $("#totalamount").html(`${total.toFixed(2)}`);
  }

  updateGrandTotal();

  $(document).on("click", ".re-btn", function () {
  const card = $(this).closest(".card"); 
  const index = card.data("index"); 

 
  let product = JSON.parse(localStorage.getItem("product")) || [];
  product.splice(index, 1);
  localStorage.setItem("product", JSON.stringify(product));

 
  card.remove();

 
  $("#cart").text(product.length);
  updateGrandTotal();
});

// increase button
$(document).on("click", ".inc", function () {
  // debugger
  let parent = $(this).closest(".card");
  let qtyElem = parent.find(".counting");
  let counting = parseInt(qtyElem.text());
 counting++;
          if (counting == 1) {
            counting = 1;
          }
          qtyElem.text(counting);
          // updateItemTotal(parent);
          updateGrandTotal();
});

// decrease button
$(document).on("click", ".dec", function () {
  let parent = $(this).closest(".card");
  let qtyElem = parent.find(".counting");
  let counting = parseInt(qtyElem.text());
  if (counting > 1) {
    counting--;
    qtyElem.text(counting);
    // updateItemTotal(parent);
    updateGrandTotal();
  }
});

// function updateItemTotal(parent) {
//   debugger
//           const price = parseFloat(parent.find("proprice").data("proprice"));
//           const qty = parseInt(parent.find(".counting").text());
//           const total = price * qty;
//           parent.find("#totalamount").text(total.toFixed(2));
//         }

//         function updateItemTotal(parent) {
//   const qty = parseFloat(parent.find(".counting").text());
//   const unitPrice = parseFloat(parent.find("price").data("price"));
//   const total = qty * unitPrice;
//   parent.find("#totalamount").text(`$${total.toFixed(2)}`);
// }

// function updateGrandTotal(){
//   debugger;
//   let grandtotal =0;

//     $("#new").each(function(){
//       grandtotal += parseFloat($(this).text());
//     })
//     let gt = $("#totalamount").html(`<span>Total Purchaede:$${grandtotal.toFixed(2)}</span>`)

// }

$(document).on("click","#buybtn", function(){
  debugger
 let amountcheck= $('#totalamount').text()
//  console.log(amountcheck)
  if(amountcheck!=0){
localStorage.removeItem("product");
        location.reload();
  window.location.assign("paymet.html");
  }else{
    alert("Please add some products in cart")
   let c =  confirm("Do you want to Purchase ?")
   if(c){
    window.location.assign("landing.html");
   }

  }

})



</script>

    
</body>
</html>